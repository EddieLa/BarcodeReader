!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BarcodeReader=t():e.BarcodeReader=t()}(window,function(){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2)}([function(e,t,a){var r=function(){function e(e){for(var t,a=0,r=0;t=e[r++];)t>a&&(a=t);return a}function t(e,t,a,r){var n,o,i=[];switch(r){case 90:for(n=0;n<4*t;n+=4)for(o=4*t*(a-1);o>=0;o-=4*t)i.push(e[n+o]),i.push(e[n+o+1]),i.push(e[n+o+2]),i.push(e[n+o+3]);break;case-90:for(n=4*t-4;n>=0;n-=4)for(o=0;o<e.length;o+=4*t)i.push(e[n+o]),i.push(e[n+o+1]),i.push(e[n+o+2]),i.push(e[n+o+3]);break;case 180:for(o=4*t*(a-1);o>=0;o-=4*t)for(n=4*t-4;n>=0;n-=4)i.push(e[n+o]),i.push(e[n+o+1]),i.push(e[n+o+2]),i.push(e[n+o+3])}return new Uint8ClampedArray(i)}function a(e,t,a){var r,n,o,i,c=[],l=[];for(n=0;n<t;n++)for(c.push([]),l.push(0),o=0;o<(a+1)*t;o+=t)c[c.length-1].push(e[n+o]),l[l.length-1]=l[l.length-1]+e[n+o];var d=[];for(o=0;o<e.length;o+=t){for(n=0;n<t;n++){var u=0,g=0;for(i=n;i>=0&&(u+=l[i],++g!==a+1);i--);var h=0;for(i=n+1;i<t&&(u+=l[i],g++,++h!==a);i++);u/=g*=c[0].length,d.push(u)}if(o-a*t>=0)for(i=0;i<c.length;i++)r=c[i].shift(),l[i]=l[i]-r;if(o+(a+1)*t<e.length)for(i=0;i<c.length;i++)r=e[i+o+(a+1)*t],c[i].push(r),l[i]=l[i]+r}return d}function r(e,t){var a,r=0;for(a=1;a<e.length;++a)r+=a*e[a];var n,o,i=0,c=0,l=0,d=0,u=0,g=0,h=0;for(a=0;a<e.length;++a)if(0!==(c+=e[a])){if(0==(l=t-c))break;n=(i+=a*e[a])/c,o=(r-i)/l,(u=c*l*Math.pow(n-o,2))>=d&&(g=a,u>d&&(h=a),d=u)}return(g+h)/2}function n(){var e,t,a;for(Image.data=new Uint8ClampedArray(Image.width*Image.height*4),a=0;a<Image.height;a++)for(t=0;t<Image.width;t++)e=4*a*Image.width,Image.data[e+4*t]=Image.table[t][a][0],Image.data[e+4*t+1]=Image.table[t][a][1],Image.data[e+4*t+2]=Image.table[t][a][2],Image.data[e+4*t+3]=Image.table[t][a][3]}function o(){Image.table=[];var e,t,a=[];for(e=0;e<4*Image.width;e+=4){for(a=[],t=e;t<Image.data.length;t+=4*Image.width)a.push([Image.data[t],Image.data[t+1],Image.data[t+2],Image.data[t+3]]);Image.table.push(a)}}function c(e,t){var a,r,o,i=[];for(a=0;a<Image.width;a++){for(i=[],r=0;r<Image.height;r++)for(o=0;o<e;o++)i.push(Image.table[a][r]);Image.table[a]=i.slice()}for(i=Image.table.slice(),a=0;a<Image.width;a++)for(o=0;o<t;o++)Image.table[a*t+o]=i[a].slice();Image.width=Image.table.length,Image.height=Image.table[0].length,n()}function l(e){var t,a,r,n=[],o=0,i=0,c=0;for(t=0;t<Image.height-e;t+=e)for(a=0;a<Image.width;a++){for(o=0,i=0,c=0,r=t;r<t+e;r++)o+=Image.table[a][r][0],i+=Image.table[a][r][1],c+=Image.table[a][r][2];n.push(o/e),n.push(i/e),n.push(c/e),n.push(255)}return new Uint8ClampedArray(n)}function d(){!function(e){var t;for(t=0;t<e.length;t+=4){var a=0,r=255;a=e[t]>a?e[t]:a,a=e[t+1]>a?e[t+1]:a,a=e[t+2]>a?e[t+2]:a,r=e[t]<r?e[t]:r,r=e[t+1]<r?e[t+1]:r,r=e[t+2]<r?e[t+2]:r,e[t]=e[t+1]=e[t+2]=(a+r)/2}}(Image.data);var e,t,i,c=function(e,t){var a,r,n,o=[],i=Number.MIN_VALUE,c=Number.MAX_VALUE;for(r=0;r<e.length;r+=4*t)for(a=0;a<4*t;a+=4){var l=0,d=0;for(n=1;n<2;n++)a+4*n<4*t&&(l+=Math.abs(e[r+a]-e[r+a+4*n])),r+4*t*n<e.length&&(d+=d+Math.abs(e[r+a]-e[r+a+4*t*n]));var u=l-d;i=u>i?u:i,c=u<c?u:c,o.push(u)}if(c<0){for(n=0;n<o.length;n++)o[n]=o[n]-c;c=0}return o}(Image.data,Image.width),l=(c=a(c,Image.width,15))[0];for(e=1;e<c.length;e++)l=l>c[e]?c[e]:l;var d=0,u=0,g=0;for(e=0;e<c.length;e++)c[e]=Math.round(c[e]-l),g+=c[e],d<c[e]&&(d=c[e],u=e);if((g/=c.length)<15){for(l=(c=a(c,Image.width,8))[0],e=1;e<c.length;e++)l=l>c[e]?c[e]:l;for(d=0,u=0,e=0;e<c.length;e++)c[e]=Math.round(c[e]-l),d<c[e]&&(d=c[e],u=e)}var h=[];for(e=0;e<=d;e++)h[e]=0;for(e=0;e<c.length;e++)h[c[e]]=h[c[e]]+1;var s=r(h,c.length);for(e=0;e<c.length;e++)c[e]<s?Image.data[4*e]=Image.data[4*e+1]=Image.data[4*e+2]=0:Image.data[4*e]=Image.data[4*e+1]=Image.data[4*e+2]=255;o();var f=function(e,t,a){var r,n,o,i,c,l=e,d=[];do{var u=t%Image.width,g=(t-u)/Image.width,h=0,s=Image.height,f=0,C=Image.width-1;for(n=g;n<Image.height-1;n++)if(0===Image.table[u][n+1][0]){s=n;break}for(n=g;n>0;n--)if(0===Image.table[u][n-1][0]){h=n;break}for(r=u;r<Image.width-1;r++)if(0===Image.table[r+1][g][0]){C=r;break}for(r=u;r>0;r--)if(0===Image.table[r-1][g][0]){f=r;break}for(n=h*Image.width;n<=s*Image.width;n+=Image.width)for(r=f;r<=C;r++)a[n+r]=0;var m=[[f,C],[h,s]];for(o=0;o<d.length;o++)if(i=m,c=d[o],i[0][0]<=c[0][1]&&c[0][0]<=i[0][1]&&i[1][0]<=c[1][1]&&c[1][0]<=i[1][1]){if(d[o][0][1]-d[o][0][0]>m[0][1]-m[0][0]){d[o][0][0]=d[o][0][0]<m[0][0]?d[o][0][0]:m[0][0],d[o][0][1]=d[o][0][1]>m[0][1]?d[o][0][1]:m[0][1],m=[];break}d[o][0][0]=d[o][0][0]<m[0][0]?d[o][0][0]:m[0][0],d[o][0][1]=d[o][0][1]>m[0][1]?d[o][0][1]:m[0][1],d[o][1][0]=m[1][0],d[o][1][1]=m[1][1],m=[];break}for(m.length>0&&d.push(m),e=0,t=0,o=0;o<a.length;o++)a[o]>e&&(e=a[o],t=o)}while(e>.7*l);return d}(d,u,c),C=[];for(e=0;e<f.length;e++)C.push({x:f[e][0][0],y:f[e][1][0],width:f[e][0][1]-f[e][0][0],height:f[e][1][1]-f[e][1][0]});for(C.length>0&&postMessage({result:C,success:"localization"}),allTables=[],e=0;e<f.length;e++){var m=[];for(t=2*f[e][0][0];t<2*f[e][0][1];t++){var p=[];for(i=2*f[e][1][0];i<2*f[e][1][1];i++)p.push([ScanImage.table[t][i][0],ScanImage.table[t][i][1],ScanImage.table[t][i][2],255]);m.push(p)}m.length<1||(Image.table=m,Image.width=m.length,Image.height=m[0].length,n(),allTables.push({table:m,data:new Uint8ClampedArray(Image.data),width:Image.width,height:Image.height}))}}function u(e,t,a){var r,n,o,i=0,c=new Uint8ClampedArray(Image.width*(a-t+1)*4);for(n=0;n<c.length;n++)c[n]=255;for(n=0;n<4*Image.width;n+=4)for(r=a,i=(e[n]+e[n+1]+e[n+2])/3,n<4*Image.width-4&&(i+=(e[n+4]+e[n+5]+e[n+6])/3,i/=2),o=n;o<c.length;o+=4*Image.width)i<r&&(c[o]=c[o+1]=c[o+2]=0),r--;return c}function g(e,t){if(t){if(5!==e.length)return!1}else if(3!==e.length)return!1;var a,r=0;for(a=0;a<e.length;a++)r+=e[a];for(r/=e.length,a=0;a<e.length;a++)if(e[a]/r<.5||e[a]/r>1.5)return!1;return!0}function h(e,t){if(e.length<5||e.length>6)return!1;var a,r=0,n=[0,0];for(a=0;a<e.length;a++)e[a]>r&&(r=e[a],n[0]=a);for(r=0,a=0;a<e.length;a++)a!==n[0]&&e[a]>r&&(r=e[a],n[1]=a);return n[0]+n[1]===2}function s(e,t){var a,r=0;for(a=0;a<e.length;a++)r+=e[a];if(r/=4,t){if(4!==e.length)return!1;for(a=0;a<e.length;a++)if(e[a]/r<.5||e[a]/r>1.5)return!1;return!0}if(3!==e.length)return!1;var n,o=0;for(a=0;a<e.length;a++)e[a]>o&&(o=e[a],n=a);if(0!==n)return!1;if(e[0]/r<1.5||e[0]/r>2.5)return!1;for(a=1;a<e.length;a++)if(e[a]/r<.5||e[a]/r>1.5)return!1;return!0}function f(e,t){var a,r,n,o=[],i=[],c=0;if("Code128"===t||"Code93"===t){for(r=6,a=e[0],"Code128"===t&&(a/=2),n=0;n<e.length;n++)if(e[n]>6*a){e.splice(n,e.length);break}do{7===e.length&&"Code128"===t?o.push(e.splice(0,e.length)):o.push(e.splice(0,r)),"Code93"===t&&e.length<6&&e.splice(0,r)}while(e.length>0)}if("Code39"===t){for(r=9,a=e[0],n=0;n<e.length;n++)if(e[n]>5*a){e.splice(n,e.length);break}do{o.push(e.splice(0,r)),e.splice(0,1)}while(e.length>0)}if("EAN-13"===t){r=4,a=e[0];var l=0;for(n=0;n<e.length;n++)if(e[n]>6*a){e.splice(n,e.length);break}g(e.splice(0,3),!1)&&l++,c=0;do{o.push(e.splice(0,r)),6==++c&&g(e.splice(0,5),!0)&&l++}while(o.length<12&&e.length>0);if(g(e.splice(0,3),!1)&&l++,l<2)return[]}if("2Of5"===t){for(r=5,a=e[0]/2,n=0;n<e.length;n++)if(e[n]>5*a){e.splice(n,e.length);break}var d=e.splice(0,6);o.push(d);do{for(i=[],n=0;n<r;n++)i.push(e.splice(0,1)[0]);o.push(i),5===e.length&&o.push(e.splice(0,5))}while(e.length>0)}if("Inter2Of5"===t){for(r=5,a=e[0],n=0;n<e.length;n++)if(e[n]>5*a){e.splice(n,e.length);break}o.push(e.splice(0,4));var u=[];do{for(i=[],u=[],n=0;n<r;n++)i.push(e.splice(0,1)[0]),u.push(e.splice(0,1)[0]);o.push(i),o.push(u),3===e.length&&o.push(e.splice(0,3))}while(e.length>0)}if("Codabar"===t){for(r=7,a=e[0],n=0;n<e.length;n++)if(e[n]>5*a){e.splice(n,e.length);break}do{o.push(e.splice(0,r)),e.splice(0,1)}while(e.length>0)}if("Code11"===t){r=5;do{o.push(e.splice(0,r)),e.splice(0,1)}while(e.length>0)}if("CodeMSI"===t){r=8,o.push(e.splice(0,2));do{o.push(e.splice(0,r))}while(e.length>0)}return o}function C(e,t){var a,r,n,o,i=[],c=[],l=255,d=0;for(n=0;n<e.length-4*Image.width;n+=4*Image.width){var u=e.subarray(n,n+4*Image.width);for(i=[],o=0;255===u[o];)o+=4;for(;o<u.length;){for(d=0,l=u[o];u[o]===l&&o<u.length;)d++,o+=4;i.push(d)}i.length>2&&i[0]<=i[1]/10&&i.splice(0,2);var g=i.slice(),C=!1;for(o=0;o<FormatPriority.length;o++){var k,L;if(i=f(i=g.slice(),FormatPriority[o]),"2Of5"!==FormatPriority[o]&&"Inter2Of5"!==FormatPriority[o]||(k=i.splice(0,1)[0],L=i.splice(i.length-1,1)[0]),c=m(i,FormatPriority[o]),FormatPriority[o],FormatPriority[o],"EAN-13"===FormatPriority[o]?(i=c.data,corrections=c.correction):i=c,void 0!==i){if(i.length>4||"Code39"===FormatPriority[o]&&i.length>2||"Code11"===FormatPriority[o]&&i.length>2)if("Code128"===FormatPriority[o])p(i)&&(i=P(i),C=!0);else if("Code93"===FormatPriority[o])w(i)&&(i=y(i),C=!0);else if("Code39"===FormatPriority[o])E(i)&&(i=D(i),C=!0);else if("EAN-13"===FormatPriority[o])(r=F(i))&&13===r.length&&(i=r,C=!0);else if("2Of5"===FormatPriority[o]||"Inter2Of5"===FormatPriority[o]){if("2Of5"===FormatPriority[o]){if(void 0!==k&&!h(k))continue;if(void 0!==L&&!h(L))continue}if("Inter2Of5"===FormatPriority[o]){if(void 0!==k&&!s(k,!0))continue;if(void 0!==L&&!s(L,!1))continue}(r=I(i))&&(i=r,C=!0)}else"Codabar"===FormatPriority[o]?(r=A(i))&&(i=r,C=!0):"Code11"===FormatPriority[o]?v(i)&&(r=b(i))&&(i=r,C=!0):"CodeMSI"===FormatPriority[o]&&S(i)&&(r=B(i))&&(i=r,C=!0);if(C){"Inter2Of5"===(a=FormatPriority[o])&&(a="Interleaved 2 of 5"),"2Of5"===a&&(a="Standard 2 of 5");break}}}if(C)break}return"Code128"===a?"string"==typeof i.string?i:{string:!1}:"string"==typeof i?"EAN-13"===a?{string:i,format:a,correction:corrections}:{string:i,format:a}:{string:!1}}function m(t,a){var r,n,o,i,c,l,d,u,g,h,s,f,C,m=0,p=[];for(0===(a=availableFormats.indexOf(a))?(n=11,r=6,o=4):1===a?(n=9,r=6,o=4):2===a?(n=12,r=9):3===a?(n=7,r=4,o=4):6===a&&(r=7),i=0;i<t.length;i++){var v=t[i],S=0,I=0,A=[];if(6!==a)if(4!==a&&5!==a){for(;I<r;)S+=v[I],I++;if(2!==a)if(3!==a){for(I=0;I<r;)A.push(v[I]/S*n),I++;for(I=0;I<r;)A[I]=A[I]>o?o:A[I],A[I]=A[I]<1?1:A[I],A[I]=Math.round(A[I]),I++;if(3===a){var b=0;for(c=0;c<A.length;c++)b+=A[c];if(b>7){C=0;var B=0;for(c=0;c<A.length;c++)A[c]>C&&(C=A[c],B=c);A[B]=C-(b-7)}}if(3===a)for(c=0;c<A.length;c++)m+=Math.abs(A[c]-v[c]/S*n);if(7===a)for(C=e(v),c=0;c<v.length;c++)A.push(C/v[c]>2?0:1);if(8===a)for(C=e(v),c=0;c<v.length;c++)c%2?C/v[c]>=2?A.push(0):(A.push(0),A.push(0)):C/v[c]>=2?A.push(1):(A.push(1),A.push(1));p.push(A)}else{for(C=[[0,0],[0,0],[0,0]],l=0;l<v.length;l++)v[l]>C[0][0]&&(C[0][0]=v[l],s=C[0][1],C[0][1]=l,l=s),v[l]>C[1][0]&&l!==C[0][1]&&(C[1][0]=v[l],s=C[1][1],C[1][1]=l,l=s),v[l]>C[2][0]&&l!==C[0][1]&&l!==C[1][1]&&(C[2][0]=v[l],C[2][1]=l);if(C[0][0]/C[1][0]>=3){for(h=0,l=0;l<v.length;l++)l!==C[0][1]&&(h+=v[l]);for(h/=3,l=0;l<v.length;l++)if(l!==C[0][1]&&(v[l]/h<.02||v[l]/h>3))return{data:[],correction:0};if(C[0][0]/h<2.2||C[0][0]/h>6)return{data:[],correction:0};for(l=0;l<v.length;l++)l===C[0][1]?A.push(4):A.push(1);p.push(A)}else if(C[0][0]/C[2][0]>2){if(g=C[0][0]+C[1][0],g/=5,C[0][0]/(3*g)<.02||C[0][0]/(3*g)>3)return{data:[],correction:0};if(C[1][0]/(2*g)<.02||C[1][0]/(2*g)>3)return{data:[],correction:0};for(h=0,l=0;l<v.length;l++)l!==C[0][1]&&l!==C[1][1]&&(h+=v[l]);for(h/=2,l=0;l<v.length;l++)if(l!==C[0][1]&&l!==C[1][1]&&(v[l]/h<.02||v[l]/h>3))return{data:[],correction:0};for(l=0;l<v.length;l++)l===C[0][1]?A.push(3):l===C[1][1]?A.push(2):A.push(1);p.push(A)}else{if(C[0][1]%2==C[1][1]%2&&C[0][1]%2==C[2][1]%2){var F=C[0][1]%2;for(C[2]=[0,0],l=0;l<v.length;l++)l%2!==F&&v[l]>C[2][0]&&(C[2][0]=v[l],C[2][1]=l)}for(g=C[0][0]+C[1][0]+C[2][0],g/=3,l=0;l<C.length;l++)if(C[l][0]/g<.02||C[l][0]/g>3)return{data:[],correction:0};var w=0;for(l=0;l<v.length;l++)l!==C[0][1]&&l!==C[1][1]&&l!==C[2][1]&&(w=v[l]);if(g/w<.02||g/w>3)return{data:[],correction:0};for(l=0;l<v.length;l++)l===C[0][1]||l===C[1][1]||l===C[2][1]?A.push(2):A.push(1);p.push(A)}for(l=0;l<A.length;l++)m+=Math.abs(A[l]-v[l]/S*n)}else{for(d=[[0,0],[0,0]],u=[0,0],l=0;l<v.length;l++)l%2==0?(v[l]>d[0][0]&&(d[0][0]=v[l],s=d[0][1],d[0][1]=l,l=s),v[l]>d[1][0]&&l!==d[0][1]&&(d[1][0]=v[l],d[1][1]=l)):v[l]>u[0]&&(u[0]=v[l],u[1]=l);if(u[0]/d[0][0]>1.5&&u[0]/d[1][0]>1.5)for(d=[[0,0],[0,0]],l=0;l<v.length;l++)l%2!=0&&(v[l]>d[0][0]&&l!==u[1]&&(d[0][0]=v[l],s=d[0][1],d[0][1]=l,l=s),v[l]>d[1][0]&&l!==d[0][1]&&l!==u[1]&&(d[1][0]=v[l],d[1][1]=l));if(g=d[0][0]+d[1][0]+u[0],g/=3,d[0][0]/g>1.6||d[0][0]/g<.4)return[];if(d[1][0]/g>1.6||d[1][0]/g<.4)return[];if(u[0]/g>1.6||u[0]/g<.4)return[];for(h=0,c=0;c<v.length;c++)c!==d[0][1]&&c!==d[1][1]&&c!==u[1]&&(h+=v[c]);for(h/=6,c=0;c<v.length;c++)if(c!==d[0][1]&&c!==d[1][1]&&c!==u[1]&&(v[c]/h>1.6||v[c]/h<.4))return[];for(l=0;l<v.length;l++)l===d[0][1]||l===d[1][1]||l===u[1]?A.push(2):A.push(1);p.push(A)}}else{for(C=[[0,0],[0,0]],c=0;c<v.length;c++){if(!isFinite(v[c]))return[];v[c]>C[0][0]&&(C[0][0]=v[c],s=C[0][1],C[0][1]=c,c=s-1),v[c]>C[1][0]&&c!==C[0][1]&&(C[1][0]=v[c],C[1][1]=c)}if(Secure2Of5){if(g=C[0][0]+C[1][0],g/=2,C[0][0]/g>1.3||C[0][0]/g<.7)return[];if(C[1][0]/g>1.3||C[1][0]/g<.7)return[];for(h=0,c=0;c<v.length;c++)c!==C[0][1]&&c!==C[1][1]&&(h+=v[c]);for(h/=3,c=0;c<v.length;c++)if(c!==C[0][1]&&c!==C[1][1]&&(v[c]/h>1.3||v[c]/h<.7))return[]}for(c=0;c<v.length;c++)c!==C[0][1]&&c!==C[1][1]?A.push(0):A.push(1);p.push(A)}else{if(7!==v.length)return[];if(0===i||i===t.length-1){for(u=[[0,0],[0,0]],d=[0,0],c=0;c<v.length;c++)if(c%2==0)v[c]>d[0]&&(d[0]=v[c],d[1]=c);else{if(v[c]>u[0][0]){u[0][0]=v[c],s=u[0][1],u[0][1]=c,c=s-1;continue}v[c]>u[1][0]&&c!==u[0][1]&&(u[1][0]=v[c],u[1][1]=c)}if(SecureCodabar){for(g=u[0][0]+u[1][0]+d[0],g/=3,f=[u[0][0],u[1][0],d[0]],c=0;c<f.length;c++)if(f[c]/g>1.5||f[c]/g<.5)return[];for(h=0,c=0;c<v.length;c++)c!==d[1]&&c!==u[0][1]&&c!==u[1][1]&&(h+=v[c]);for(h/=4,c=0;c<v.length;c++)if(c!==d[1]&&c!==u[0][1]&&c!==u[1][1]&&(v[c]/h>1.5||v[c]/h<.5))return[]}for(c=0;c<v.length;c++)c===d[1]||c===u[0][1]||c===u[1][1]?A.push(1):A.push(0)}else{for(d=[0,0],u=[0,0],c=0;c<v.length;c++)c%2==0?v[c]>d[0]&&(d[0]=v[c],d[1]=c):v[c]>u[0]&&(u[0]=v[c],u[1]=c);if(d[0]/u[0]>1.55){for(d=[d,[0,0],[0,0]],c=0;c<v.length;c++)if(c%2==0){if(v[c]>d[1][0]&&c!==d[0][1]){d[1][0]=v[c],s=d[1][1],d[1][1]=c,c=s-1;continue}v[c]>d[2][0]&&c!==d[0][1]&&c!==d[1][1]&&(d[2][0]=v[c],d[2][1]=c)}if(SecureCodabar){for(g=d[0][0]+d[1][0]+d[2][0],g/=3,c=0;c<d.length;c++)if(d[c][0]/g>1.5||d[c][0]/g<.5)return[];for(h=0,c=0;c<v.length;c++)c!==d[0][1]&&c!==d[1][1]&&c!==d[2][1]&&(h+=v[c]);for(h/=4,c=0;c<v.length;c++)if(c!==d[0][1]&&c!==d[1][1]&&c!==d[2][1]&&(v[c]/h>1.5||v[c]/h<.5))return[]}for(c=0;c<v.length;c++)c===d[0][1]||c===d[1][1]||c===d[2][1]?A.push(1):A.push(0)}else{if(SecureCodabar){if(g=d[0]+u[0],g/=2,d[0]/g>1.5||d[0]/g<.5)return[];if(u[0]/g>1.5||u[0]/g<.5)return[];for(h=0,c=0;c<v.length;c++)c!==d[1]&&c!==u[1]&&(h+=v[c]);for(h/=5,c=0;c<v.length;c++)if(c!==d[1]&&c!==u[1]&&(v[c]/h>1.5||v[c]/h<.5))return[]}for(c=0;c<v.length;c++)c===d[1]||c===u[1]?A.push(1):A.push(0)}}p.push(A)}}return 3===a?{data:p,correction:m}:p}function p(e){var t,a=e[e.length-2].join("");if(-1===(a=Code128Encoding.value.indexOf(a)))return!1;var r=Code128Encoding.value.indexOf(e[0].join(""));if(-1===r)return!1;var n=Code128Encoding[e[0].join("")];if(void 0===n)return!1;if("A"!==n&&"B"!==n&&"C"!==n)return!1;for(t=1;t<e.length-2;t++)if(r+=Code128Encoding.value.indexOf(e[t].join(""))*t,-1===Code128Encoding.value.indexOf(e[t].join("")))return!1;return r%103===a}function v(e){var t=e[0].join(""),a=e[e.length-1].join("");return"SS"===Code11Encoding[t]&&"SS"===Code11Encoding[a]}function S(e){var t=e[0].join(""),a=e[e.length-1].join("");return"Start"===CodeMSIEncoding[t]&&"Stop"===CodeMSIEncoding[a]}function I(e){var t,a="";for(t=0;t<e.length;t++){if(-1===TwoOfFiveEncoding.indexOf(e[t].join("")))return!1;a+=TwoOfFiveEncoding.indexOf(e[t].join(""))}return a}function A(e){var t,a="",r=e[0].join(""),n=e[e.length-1].join("");if("A"!==CodaBarEncoding[r]&&"B"!==CodaBarEncoding[r]&&"C"!==CodaBarEncoding[r]&&"D"!==CodaBarEncoding[r])return!1;if("A"!==CodaBarEncoding[n]&&"B"!==CodaBarEncoding[n]&&"C"!==CodaBarEncoding[n]&&"D"!==CodaBarEncoding[n])return!1;for(t=1;t<e.length-1;t++){if(void 0===CodaBarEncoding[e[t].join("")])return!1;a+=CodaBarEncoding[e[t].join("")]}return a}function b(e){var t="",a=!0;if(!v(e))return!1;for(var r=1;r<e.length-1;r++)void 0===Code11Encoding[e[r].join("")]?a=!1:t+=Code11Encoding[e[r].join("")];return!!a&&t}function B(e){var t="",a=!0;if(!S(e))return!1;for(var r=1;r<e.length-1;r++)void 0===CodeMSIEncoding[e[r].join("")]?a=!1:t+=CodeMSIEncoding[e[r].join("")];return!!a&&t}function F(e){if(12!==e.length)return!1;var t,a=e.slice(0,6),r=!1,n=e.slice(6,e.length);for(t=0;t<a.length;t++)if(a[t]=a[t].join(""),4!==a[t].length){r=!0;break}if(r)return!1;for(t=0;t<n.length;t++)if(n[t]=n[t].join(""),4!==n[t].length){r=!0;break}if(r)return!1;var o=[];for(t=0;t<a.length;t++)if(void 0!==EAN13Encoding.L[a[t]])o.push("L");else{if(void 0===EAN13Encoding.G[a[t]]){r=!0;break}o.push("G")}if(r)return!1;var i=[];if(void 0===EAN13Encoding.formats[o.join("")])return!1;for(i.push(EAN13Encoding.formats[o.join("")]),t=0;t<a.length;t++){if(void 0===EAN13Encoding[o[t]][a[t]]){r=!0;break}i.push(EAN13Encoding[o[t]][a[t]])}if(r)return!1;for(t=0;t<n.length;t++){if(void 0===EAN13Encoding.R[n[t]]){r=!0;break}i.push(EAN13Encoding.R[n[t]])}if(r)return!1;var c=3,l=0;for(t=i.length-2;t>=0;t--)l+=i[t]*c,c=3===c?1:3;return l=(10-l%10)%10,i[i.length-1]===l&&i.join("")}function w(e){var t=e[e.length-3].join(""),a=e[e.length-2].join(""),r=!0;if(void 0===Code93Encoding[t])return!1;if(void 0===Code93Encoding[a])return!1;var n,o=Code93Encoding[t].value,i=1,c=0;for(n=e.length-4;n>0&&(r=void 0!==Code93Encoding[e[n].join("")]&&r);n--)c+=Code93Encoding[e[n].join("")].value*i,++i>20&&(i=1);var l=c%47,d=l===o;if(!d)return!1;if(!r)return!1;for(c=l,i=2,o=Code93Encoding[a].value,n=e.length-4;n>0&&(r=void 0!==Code93Encoding[e[n].join("")]&&r);n--)c+=Code93Encoding[e[n].join("")].value*i,++i>15&&(i=1);return c%47===o&&d}function E(e){var t=!0;if(void 0===Code39Encoding[e[0].join("")])return!1;if("*"!==Code39Encoding[e[0].join("")].character)return!1;if(void 0===Code39Encoding[e[e.length-1].join("")])return!1;if("*"!==Code39Encoding[e[e.length-1].join("")].character)return!1;for(i=1;i<e.length-1;i++)if(void 0===Code39Encoding[e[i].join("")]){t=!1;break}return t}function D(e){var t="",a=!1,r="",n="";for(i=1;i<e.length-1;i++)("$"===(r=Code39Encoding[e[i].join("")].character)||"/"===r||"+"===r||"%"===r)&&i+1<e.length-1?(a=!0,n=r):a?(void 0===ExtendedEncoding[n+r]||(t+=ExtendedEncoding[n+r]),a=!1):t+=r;return t}function y(e){var t="",a=!1,r="",n="";for(i=1;i<e.length-3;i++)"($)"!==(r=Code93Encoding[e[i].join("")].character)&&"(/)"!==r&&"(+)"!==r&&"(%)"!==r?a?(void 0===ExtendedEncoding[n+r]||(t+=ExtendedEncoding[n+r]),a=!1):t+=r:(a=!0,n=r[1]);return t}function P(e){var t,a,r=Code128Encoding[e[0].join("")],n="Code128",o="";for(a=1;a<e.length-2;a++)switch(t=Code128Encoding[e[a].join("")][r]){case"FNC1":1===a&&(n="GS1-128");break;case"FNC2":case"FNC3":case"FNC4":break;case"SHIFT_B":a++,o+=Code128Encoding[e[a].join("")].B;break;case"SHIFT_A":a++,o+=Code128Encoding[e[a].join("")].A;break;case"Code_A":r="A";break;case"Code_B":r="B";break;case"Code_C":r="C";break;default:o+=t}return{string:o,format:n}}TwoOfFiveEncoding=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Code128Encoding={212222:{A:" ",B:" ",C:"00"},222122:{A:"!",B:"!",C:"01"},222221:{A:'"',B:'"',C:"02"},121223:{A:"#",B:"#",C:"03"},121322:{A:"$",B:"$",C:"04"},131222:{A:"%",B:"%",C:"05"},122213:{A:"&",B:"&",C:"06"},122312:{A:"'",B:"'",C:"07"},132212:{A:"(",B:"(",C:"08"},221213:{A:")",B:")",C:"09"},221312:{A:"*",B:"*",C:"10"},231212:{A:"+",B:"+",C:"11"},112232:{A:",",B:",",C:"12"},122132:{A:"-",B:"-",C:"13"},122231:{A:".",B:".",C:"14"},113222:{A:"/",B:"/",C:"15"},123122:{A:"0",B:"0",C:"16"},123221:{A:"1",B:"1",C:"17"},223211:{A:"2",B:"2",C:"18"},221132:{A:"3",B:"3",C:"19"},221231:{A:"4",B:"4",C:"20"},213212:{A:"5",B:"5",C:"21"},223112:{A:"6",B:"6",C:"22"},312131:{A:"7",B:"7",C:"23"},311222:{A:"8",B:"8",C:"24"},321122:{A:"9",B:"9",C:"25"},321221:{A:":",B:":",C:"26"},312212:{A:";",B:";",C:"27"},322112:{A:"<",B:"<",C:"28"},322211:{A:"=",B:"=",C:"29"},212123:{A:">",B:">",C:"30"},212321:{A:"?",B:"?",C:"31"},232121:{A:"@",B:"@",C:"32"},111323:{A:"A",B:"A",C:"33"},131123:{A:"B",B:"B",C:"34"},131321:{A:"C",B:"C",C:"35"},112313:{A:"D",B:"D",C:"36"},132113:{A:"E",B:"E",C:"37"},132311:{A:"F",B:"F",C:"38"},211313:{A:"G",B:"G",C:"39"},231113:{A:"H",B:"H",C:"40"},231311:{A:"I",B:"I",C:"41"},112133:{A:"J",B:"J",C:"42"},112331:{A:"K",B:"K",C:"43"},132131:{A:"L",B:"L",C:"44"},113123:{A:"M",B:"M",C:"45"},113321:{A:"N",B:"N",C:"46"},133121:{A:"O",B:"O",C:"47"},313121:{A:"P",B:"P",C:"48"},211331:{A:"Q",B:"Q",C:"49"},231131:{A:"R",B:"R",C:"50"},213113:{A:"S",B:"S",C:"51"},213311:{A:"T",B:"T",C:"52"},213131:{A:"U",B:"U",C:"53"},311123:{A:"V",B:"V",C:"54"},311321:{A:"W",B:"W",C:"55"},331121:{A:"X",B:"X",C:"56"},312113:{A:"Y",B:"Y",C:"57"},312311:{A:"Z",B:"Z",C:"58"},332111:{A:"[",B:"[",C:"59"},314111:{A:"\\",B:"\\",C:"60"},221411:{A:"]",B:"]",C:"61"},431111:{A:"^",B:"^",C:"62"},111224:{A:"_",B:"_",C:"63"},111422:{A:"NUL",B:"`",C:"64"},121124:{A:"SOH",B:"a",C:"65"},121421:{A:"STX",B:"b",C:"66"},141122:{A:"ETX",B:"c",C:"67"},141221:{A:"EOT",B:"d",C:"68"},112214:{A:"ENQ",B:"e",C:"69"},112412:{A:"ACK",B:"f",C:"70"},122114:{A:"BEL",B:"g",C:"71"},122411:{A:"BS",B:"h",C:"72"},142112:{A:"HT",B:"i",C:"73"},142211:{A:"LF",B:"j",C:"74"},241211:{A:"VT",B:"k",C:"75"},221114:{A:"FF",B:"l",C:"76"},413111:{A:"CR",B:"m",C:"77"},241112:{A:"SO",B:"n",C:"78"},134111:{A:"SI",B:"o",C:"79"},111242:{A:"DLE",B:"p",C:"80"},121142:{A:"DC1",B:"q",C:"81"},121241:{A:"DC2",B:"r",C:"82"},114212:{A:"DC3",B:"s",C:"83"},124112:{A:"DC4",B:"t",C:"84"},124211:{A:"NAK",B:"u",C:"85"},411212:{A:"SYN",B:"v",C:"86"},421112:{A:"ETB",B:"w",C:"87"},421211:{A:"CAN",B:"x",C:"88"},212141:{A:"EM",B:"y",C:"89"},214121:{A:"SUB",B:"z",C:"90"},412121:{A:"ESC",B:"{",C:"91"},111143:{A:"FS",B:"|",C:"92"},111341:{A:"GS",B:"}",C:"93"},131141:{A:"RS",B:"~",C:"94"},114113:{A:"US",B:"DEL",C:"95"},114311:{A:"FNC3",B:"FNC3",C:"96"},411113:{A:"FNC2",B:"FNC2",C:"97"},411311:{A:"SHIFT_B",B:"SHIFT_A",C:"98"},113141:{A:"Code_C",B:"Code_C",C:"99"},114131:{A:"Code_B",B:"FNC4",C:"Code_B"},311141:{A:"FNC4",B:"Code_A",C:"Code_A"},411131:{A:"FNC1",B:"FNC1",C:"FNC1"},211412:"A",211214:"B",211232:"C",233111:{A:"STOP",B:"STOP",C:"STOP"},value:["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","233111"]},Code93Encoding={131112:{value:0,character:"0"},111213:{value:1,character:"1"},111312:{value:2,character:"2"},111411:{value:3,character:"3"},121113:{value:4,character:"4"},121212:{value:5,character:"5"},121311:{value:6,character:"6"},111114:{value:7,character:"7"},131211:{value:8,character:"8"},141111:{value:9,character:"9"},211113:{value:10,character:"A"},211212:{value:11,character:"B"},211311:{value:12,character:"C"},221112:{value:13,character:"D"},221211:{value:14,character:"E"},231111:{value:15,character:"F"},112113:{value:16,character:"G"},112212:{value:17,character:"H"},112311:{value:18,character:"I"},122112:{value:19,character:"J"},132111:{value:20,character:"K"},111123:{value:21,character:"L"},111222:{value:22,character:"M"},111321:{value:23,character:"N"},121122:{value:24,character:"O"},131121:{value:25,character:"P"},212112:{value:26,character:"Q"},212211:{value:27,character:"R"},211122:{value:28,character:"S"},211221:{value:29,character:"T"},221121:{value:30,character:"U"},222111:{value:31,character:"V"},112122:{value:32,character:"W"},112221:{value:33,character:"X"},122121:{value:34,character:"Y"},123111:{value:35,character:"Z"},121131:{value:36,character:"-"},311112:{value:37,character:"."},311211:{value:38,character:" "},321111:{value:39,character:"$"},112131:{value:40,character:"/"},113121:{value:41,character:"+"},211131:{value:42,character:"%"},121221:{value:43,character:"($)"},312111:{value:44,character:"(%)"},311121:{value:45,character:"(/)"},122211:{value:46,character:"(+)"},111141:{value:-1,character:"*"}},Code39Encoding={111221211:{value:0,character:"0"},211211112:{value:1,character:"1"},112211112:{value:2,character:"2"},212211111:{value:3,character:"3"},111221112:{value:4,character:"4"},211221111:{value:5,character:"5"},112221111:{value:6,character:"6"},111211212:{value:7,character:"7"},211211211:{value:8,character:"8"},112211211:{value:9,character:"9"},211112112:{value:10,character:"A"},112112112:{value:11,character:"B"},212112111:{value:12,character:"C"},111122112:{value:13,character:"D"},211122111:{value:14,character:"E"},112122111:{value:15,character:"F"},111112212:{value:16,character:"G"},211112211:{value:17,character:"H"},112112211:{value:18,character:"I"},111122211:{value:19,character:"J"},211111122:{value:20,character:"K"},112111122:{value:21,character:"L"},212111121:{value:22,character:"M"},111121122:{value:23,character:"N"},211121121:{value:24,character:"O"},112121121:{value:25,character:"P"},111111222:{value:26,character:"Q"},211111221:{value:27,character:"R"},112111221:{value:28,character:"S"},111121221:{value:29,character:"T"},221111112:{value:30,character:"U"},122111112:{value:31,character:"V"},222111111:{value:32,character:"W"},121121112:{value:33,character:"X"},221121111:{value:34,character:"Y"},122121111:{value:35,character:"Z"},121111212:{value:36,character:"-"},221111211:{value:37,character:"."},122111211:{value:38,character:" "},121212111:{value:39,character:"$"},121211121:{value:40,character:"/"},121112121:{value:41,character:"+"},111212121:{value:42,character:"%"},121121211:{value:-1,character:"*"}},ExtendedEncoding={"/A":"!","/B":'"',"/C":"#","/D":"$","/E":"%","/F":"&","/G":"'","/H":"(","/I":")","/J":"*","/K":"+","/L":",","/O":"/","/Z":":","%F":";","%G":"<","%H":"=","%I":">","%J":"?","%K":"[","%L":"\\","%M":"]","%N":"^","%O":"_","+A":"a","+B":"b","+C":"c","+D":"d","+E":"e","+F":"f","+G":"g","+H":"h","+I":"i","+J":"j","+K":"k","+L":"l","+M":"m","+N":"n","+O":"o","+P":"p","+Q":"q","+R":"r","+S":"s","+T":"t","+U":"u","+V":"v","+W":"w","+X":"x","+Y":"y","+Z":"z","%P":"{","%Q":"|","%R":"|","%S":"~"},CodaBarEncoding={"0000011":"0","0000110":"1","0001001":"2",1100000:"3","0010010":"4",1000010:"5","0100001":"6","0100100":"7","0110000":"8",1001000:"9","0001100":"-","0011000":"$",1000101:":",1010001:"/",1010100:".","0011111":"+","0011010":"A","0001011":"B","0101001":"C","0001110":"D"},Code11Encoding={"00001":"0",10001:"1","01001":"2",11000:"3","00101":"4",10100:"5","01100":"6","00011":"7",10010:"8",10000:"9","00100":"-","00110":"SS"},CodeMSIEncoding={110:"Start",100100100100:"0",100100100110:"1",100100110100:"2",100100110110:"3",100110100100:"4",100110100110:"5",100110110100:"6",100110110110:"7",110100100100:"8",110100100110:"9",100100:"Stop"},EAN13Encoding={L:{3211:0,2221:1,2122:2,1411:3,1132:4,1231:5,1114:6,1312:7,1213:8,3112:9},G:{1123:0,1222:1,2212:2,1141:3,2311:4,1321:5,4111:6,2131:7,3121:8,2113:9},R:{3211:0,2221:1,2122:2,1411:3,1132:4,1231:5,1114:6,1312:7,1213:8,3112:9},formats:{LLLLLL:0,LLGLGG:1,LLGGLG:2,LLGGGL:3,LGLLGG:4,LGGLLG:5,LGGGLL:6,LGLGLG:7,LGLGGL:8,LGGLGL:9}},self.onmessage=function(e){var a,n;switch(ScanImage={data:new Uint8ClampedArray(e.data.scan),width:e.data.scanWidth,height:e.data.scanHeight},e.data.rotation){case 8:ScanImage.data=t(ScanImage.data,ScanImage.width,ScanImage.height,-90),a=e.data.scanWidth,ScanImage.width=ScanImage.height,ScanImage.height=a;break;case 6:ScanImage.data=t(ScanImage.data,ScanImage.width,ScanImage.height,90),a=e.data.scanWidth,ScanImage.width=ScanImage.height,ScanImage.height=a;break;case 3:ScanImage.data=t(ScanImage.data,ScanImage.width,ScanImage.height,180)}Image={data:function(e,t,a){var r,n,o=[];for(n=0;n<e.length;n+=8*t)for(r=0;r<4*t;r+=8){var i=(e[n+r]+e[n+r+4]+e[n+4*t+r]+e[n+4*t+r+4])/4;o.push(i);var c=(e[n+r+1]+e[n+r+4+1]+e[n+4*t+r+1]+e[n+4*t+r+4+1])/4;o.push(c);var l=(e[n+r+2]+e[n+r+4+2]+e[n+4*t+r+2]+e[n+4*t+r+4+2])/4;o.push(l),o.push(255)}return new Uint8ClampedArray(o)}(ScanImage.data,ScanImage.width,ScanImage.height),width:ScanImage.width/2,height:ScanImage.height/2},e.data.postOrientation&&postMessage({result:Image,success:"orientationData"}),availableFormats=["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar","Code11","CodeMSI"],FormatPriority=[];var i=["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar","Code11","CodeMSI"];for(SecureCodabar=!0,Secure2Of5=!0,Multiple=!0,void 0!==e.data.multiple&&(Multiple=e.data.multiple),void 0!==e.data.decodeFormats&&(i=e.data.decodeFormats),n=0;n<i.length;n++)FormatPriority.push(i[n]);o(),function(){ScanImage.table=[];var e,t,a=[];for(e=0;e<4*ScanImage.width;e+=4){for(a=[],t=e;t<ScanImage.data.length;t+=4*ScanImage.width)a.push([ScanImage.data[t],ScanImage.data[t+1],ScanImage.data[t+2],ScanImage.data[t+3]]);ScanImage.table.push(a)}}();var g=function(){d();var e,t,a,n,o,i,g,h=[];for(i=0;i<allTables.length;i++){Image=allTables[i];var s,f=l(30),m=0,p="",v={},S=[];Selection=!1;do{for(t=f.subarray(m,m+4*Image.width),a=[],g=0;g<256;g++)a[g]=0;for(g=0;g<t.length;g+=4)a[n=Math.round((t[g]+t[g+1]+t[g+2])/3)]=a[n]+1;s=u(t,(o=r(a,t.length/4))<41?1:o-40,o>214?254:o+40),Selection=C(s),Selection.string?(p=Selection.format,e=Selection,Selection=Selection.string,"EAN-13"===p&&(void 0===v[Selection]?(v[Selection]={count:1,correction:e.correction},S.push(Selection)):(v[Selection].count=v[Selection].count+1,v[Selection].correction=v[Selection].correction+e.correction),Selection=!1)):Selection=!1,m+=4*Image.width}while(!Selection&&m<f.length);if(Selection&&"EAN-13"!==p&&h.push({Format:p,Value:Selection}),"EAN-13"===p&&(Selection=!1),!Selection){c(4,2),m=0,f=l(20);do{for(t=f.subarray(m,m+4*Image.width),a=[],g=0;g<256;g++)a[g]=0;for(g=0;g<t.length;g+=4)a[n=Math.round((t[g]+t[g+1]+t[g+2])/3)]=a[n]+1;s=u(t,(o=r(a,t.length/4))<40?0:o-40,o>215?255:o+40),Selection=C(s),Selection.string?(p=Selection.format,e=Selection,Selection=Selection.string,"EAN-13"===p&&(void 0===v[Selection]?(v[Selection]={count:1,correction:e.correction},S.push(Selection)):(v[Selection].count=v[Selection].count+1,v[Selection].correction=v[Selection].correction+e.correction),Selection=!1)):Selection=!1,m+=4*Image.width}while(!Selection&&m<f.length);if("EAN-13"===p){var I={};for(var A in v){v[A].correction=v[A].correction/v[A].count;var b=v[A].correction;b-=v[A].count,b+=S.indexOf(A),I[A]=b}var B=Number.POSITIVE_INFINITY,F="";for(var w in I)I[w]<B&&(B=I[w],F=A);Selection=B<11&&F}Selection&&h.push({Format:p,Value:Selection})}if(h.length>0&&!Multiple)break}return h}();g.length>0?postMessage({result:g,success:!0}):postMessage({result:g,success:!1})}}.toString();r=r.substring(r.indexOf("{")+1,r.lastIndexOf("}")),void 0!==e&&e.exports&&(t=e.exports=r),t.decoderWorkerBlobString=r},function(e,t,a){var r;(function(){var a=!1,n=function(e){return e instanceof n?e:this instanceof n?void(this.EXIFwrapped=e):new n(e)};void 0!==e&&e.exports&&(t=e.exports=n),t.EXIF=n;var o=n.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},i=n.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},c=n.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l=n.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function d(e){return!!e.exifdata}function u(e,t){var r=new FileReader,n=function(r){var n=g(r),o=function(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;var r=2,n=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;r<n;){if(o(t,r)){var i=t.getUint8(r+7);i%2!=0&&(i+=1),0===i&&(i=4);var c=r+8+i,l=t.getUint16(r+6+i);return s(e,c,l)}r++}}(r);e.exifdata=n||{},e.iptcdata=o||{},t&&t(e)};if(e.src)if(/^data\:/i.test(e.src)){var o=function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var a=atob(e),r=a.length,n=new ArrayBuffer(r),o=new Uint8Array(n),i=0;i<r;i++)o[i]=a.charCodeAt(i);return n}(e.src);n(o)}else if(/^blob\:/i.test(e.src))r.onload=function(e){n(e.target.result)},function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},a.send()}(e.src,function(e){r.readAsArrayBuffer(e)});else{var i=new XMLHttpRequest;i.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(i.response),i=null},i.open("GET",e.src,!0),i.responseType="arraybuffer",i.send(null)}else window.FileReader&&(e instanceof window.Blob||e instanceof window.File)&&(r.onload=function(e){a&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},r.readAsArrayBuffer(e))}function g(e){var t=new DataView(e);if(a&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;for(var r,n=2,o=e.byteLength;n<o;){if(255!=t.getUint8(n))return a&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n)),!1;if(r=t.getUint8(n+1),a&&console.log(r),225==r)return a&&console.log("Found 0xFFE1 marker"),p(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}var h={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function s(e,t,a){for(var r,n,o,i,c=new DataView(e),l={},d=t;d<t+a;)28===c.getUint8(d)&&2===c.getUint8(d+1)&&(i=c.getUint8(d+2))in h&&((o=c.getInt16(d+3))+5,n=h[i],r=m(c,d+5,o),l.hasOwnProperty(n)?l[n]instanceof Array?l[n].push(r):l[n]=[l[n],r]:l[n]=r),d++;return l}function f(e,t,r,n,o){var i,c,l,d=e.getUint16(r,!o),u={};for(l=0;l<d;l++)i=r+12*l+2,!(c=n[e.getUint16(i,!o)])&&a&&console.log("Unknown tag: "+e.getUint16(i,!o)),u[c]=C(e,i,t,r,o);return u}function C(e,t,a,r,n){var o,i,c,l,d,u,g=e.getUint16(t+2,!n),h=e.getUint32(t+4,!n),s=e.getUint32(t+8,!n)+a;switch(g){case 1:case 7:if(1==h)return e.getUint8(t+8,!n);for(o=h>4?s:t+8,i=[],l=0;l<h;l++)i[l]=e.getUint8(o+l);return i;case 2:return m(e,o=h>4?s:t+8,h-1);case 3:if(1==h)return e.getUint16(t+8,!n);for(o=h>2?s:t+8,i=[],l=0;l<h;l++)i[l]=e.getUint16(o+2*l,!n);return i;case 4:if(1==h)return e.getUint32(t+8,!n);for(i=[],l=0;l<h;l++)i[l]=e.getUint32(s+4*l,!n);return i;case 5:if(1==h)return(c=(d=e.getUint32(s,!n))/(u=e.getUint32(s+4,!n))).numerator=d,c.denominator=u,c;for(i=[],l=0;l<h;l++)d=e.getUint32(s+8*l,!n),u=e.getUint32(s+4+8*l,!n),i[l]=d/u,i[l].numerator=d,i[l].denominator=u;return i;case 9:if(1==h)return e.getInt32(t+8,!n);for(i=[],l=0;l<h;l++)i[l]=e.getInt32(s+4*l,!n);return i;case 10:if(1==h)return e.getInt32(s,!n)/e.getInt32(s+4,!n);for(i=[],l=0;l<h;l++)i[l]=e.getInt32(s+8*l,!n)/e.getInt32(s+4+8*l,!n);return i}}function m(e,t,a){var r,n="";for(r=t;r<t+a;r++)n+=String.fromCharCode(e.getUint8(r));return n}function p(e,t){if("Exif"!=m(e,t,4))return a&&console.log("Not valid EXIF data! "+m(e,t,4)),!1;var r,n,d,u,g,h=t+6;if(18761==e.getUint16(h))r=!1;else{if(19789!=e.getUint16(h))return a&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;r=!0}if(42!=e.getUint16(h+2,!r))return a&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var s=e.getUint32(h+4,!r);if(s<8)return a&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(h+4,!r)),!1;if((n=f(e,h,h+s,i,r)).ExifIFDPointer)for(d in u=f(e,h,h+n.ExifIFDPointer,o,r)){switch(d){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":u[d]=l[d][u[d]];break;case"ExifVersion":case"FlashpixVersion":u[d]=String.fromCharCode(u[d][0],u[d][1],u[d][2],u[d][3]);break;case"ComponentsConfiguration":u[d]=l.Components[u[d][0]]+l.Components[u[d][1]]+l.Components[u[d][2]]+l.Components[u[d][3]]}n[d]=u[d]}if(n.GPSInfoIFDPointer)for(d in g=f(e,h,h+n.GPSInfoIFDPointer,c,r)){switch(d){case"GPSVersionID":g[d]=g[d][0]+"."+g[d][1]+"."+g[d][2]+"."+g[d][3]}n[d]=g[d]}return n}n.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(d(e)?t&&t(e):u(e,t),!0)},n.getTag=function(e,t){if(d(e))return e.exifdata[t]},n.getAllTags=function(e){if(!d(e))return{};var t,a=e.exifdata,r={};for(t in a)a.hasOwnProperty(t)&&(r[t]=a[t]);return r},n.pretty=function(e){if(!d(e))return"";var t,a=e.exifdata,r="";for(t in a)a.hasOwnProperty(t)&&("object"==typeof a[t]?a[t]instanceof Number?r+=t+" : "+a[t]+" ["+a[t].numerator+"/"+a[t].denominator+"]\r\n":r+=t+" : ["+a[t].length+" values]\r\n":r+=t+" : "+a[t]+"\r\n");return r},n.readFromBinaryFile=function(e){return g(e)},void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}).call(this)},function(e,t,a){var r=a(1),n=a(0),o={Config:{Multiple:!0,DecodeFormats:["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar","Code11","CodeMSI"],ForceUnique:!0,LocalizationFeedback:!1,SkipOrientation:!1},SupportedFormats:["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar","Code11","CodeMSI"],ScanCanvas:null,ScanContext:null,SquashCanvas:document.createElement("canvas"),ImageCallback:null,StreamCallback:null,LocalizationCallback:null,ImageErrorCallback:null,Stream:null,DecodeStreamActive:!1,Decoded:[],DecoderWorker:new Worker(URL.createObjectURL(new Blob([n],{type:"application/javascript"}))),OrientationCallback:null,Init:function(){o.ScanCanvas=o.FixCanvas(document.createElement("canvas")),o.ScanCanvas.width=640,o.ScanCanvas.height=480,o.ScanContext=o.ScanCanvas.getContext("2d")},SetRotationSkip:function(e){o.Config.SkipOrientation=e},SetImageCallback:function(e){o.ImageCallback=e},SetStreamCallback:function(e){o.StreamCallback=e},SetLocalizationCallback:function(e){o.LocalizationCallback=e,o.Config.LocalizationFeedback=!0},SetImageErrorCallback:function(e){o.ImageErrorCallback=e},SwitchLocalizationFeedback:function(e){o.Config.LocalizationFeedback=e},DecodeSingleBarcode:function(){o.Config.Multiple=!1},DecodeMultiple:function(){o.Config.Multiple=!0},SetDecodeFormats:function(e){o.Config.DecodeFormats=[];for(var t=0;t<e.length;t++)-1!==o.SupportedFormats.indexOf(e[t])&&o.Config.DecodeFormats.push(e[t]);0===o.Config.DecodeFormats.length&&(o.Config.DecodeFormats=o.SupportedFormats.slice())},SkipFormats:function(e){for(var t=0;t<e.length;t++){var a=o.Config.DecodeFormats.indexOf(e[t]);a>=0&&o.Config.DecodeFormats.splice(a,1)}},AddFormats:function(e){for(var t=0;t<e.length;t++)-1!==o.SupportedFormats.indexOf(e[t])&&-1===o.Config.DecodeFormats.indexOf(e[t])&&o.Config.DecodeFormats.push(e[t])},BarcodeReaderImageCallback:function(e){if("localization"!==e.data.success)if("orientationData"!==e.data.success){for(var t=[],a=0;a<e.data.result.length;a++)-1!==o.Decoded.indexOf(e.data.result[a].Value)&&!1!==o.Config.ForceUnique||(t.push(e.data.result[a]),o.Config.ForceUnique&&o.Decoded.push(e.data.result[a].Value));o.ImageCallback(t),o.Decoded=[]}else o.OrientationCallback(e.data.result);else o.Config.LocalizationFeedback&&o.LocalizationCallback(e.data.result)},BarcodeReaderStreamCallback:function(e){if("localization"!==e.data.success){if(e.data.success&&o.DecodeStreamActive){for(var t=[],a=0;a<e.data.result.length;a++)-1!==o.Decoded.indexOf(e.data.result[a].Value)&&!1!==o.ForceUnique||(t.push(e.data.result[a]),o.ForceUnique&&o.Decoded.push(e.data.result[a].Value));t.length>0&&o.StreamCallback(t)}o.DecodeStreamActive&&(o.ScanContext.drawImage(o.Stream,0,0,o.ScanCanvas.width,o.ScanCanvas.height),o.DecoderWorker.postMessage({scan:o.ScanContext.getImageData(0,0,o.ScanCanvas.width,o.ScanCanvas.height).data,scanWidth:o.ScanCanvas.width,scanHeight:o.ScanCanvas.height,multiple:o.Config.Multiple,decodeFormats:o.Config.DecodeFormats,cmd:"normal",rotation:1})),o.DecodeStreamActive||(o.Decoded=[])}else o.Config.LocalizationFeedback&&o.LocalizationCallback(e.data.result)},DecodeImage:function(e){var t=new Image;t.onerror=o.ImageErrorCallback,e instanceof Image||e instanceof HTMLImageElement?(e.exifdata=!1,e.complete?o.Config.SkipOrientation?o.BarcodeReaderDecodeImage(e,1,""):r.getData(e,function(e){var t=r.getTag(e,"Orientation"),a=r.getTag(e,"SceneCaptureType");"number"!=typeof t&&(t=1),o.BarcodeReaderDecodeImage(e,t,a)}):(t.onload=function(){o.Config.SkipOrientation?o.BarcodeReaderDecodeImage(t,1,""):r.getData(this,function(e){var t=r.getTag(e,"Orientation"),a=r.getTag(e,"SceneCaptureType");"number"!=typeof t&&(t=1),o.BarcodeReaderDecodeImage(e,t,a)})},t.src=e.src)):(t.onload=function(){o.Config.SkipOrientation?o.BarcodeReaderDecodeImage(t,1,""):r.getData(this,function(e){var t=r.getTag(e,"Orientation"),a=r.getTag(e,"SceneCaptureType");"number"!=typeof t&&(t=1),o.BarcodeReaderDecodeImage(e,t,a)})},t.src=e)},DecodeStream:function(e){o.Stream=e,o.DecodeStreamActive=!0,o.DecoderWorker.onmessage=o.BarcodeReaderStreamCallback,o.ScanContext.drawImage(e,0,0,o.ScanCanvas.width,o.ScanCanvas.height),o.DecoderWorker.postMessage({scan:o.ScanContext.getImageData(0,0,o.ScanCanvas.width,o.ScanCanvas.height).data,scanWidth:o.ScanCanvas.width,scanHeight:o.ScanCanvas.height,multiple:o.Config.Multiple,decodeFormats:o.Config.DecodeFormats,cmd:"normal",rotation:1})},StopStreamDecode:function(){o.DecodeStreamActive=!1,o.Decoded=[]},BarcodeReaderDecodeImage:function(e,t,a){8===t||6===t?"Landscape"===a&&e.width>e.height?(t=1,o.ScanCanvas.width=640,o.ScanCanvas.height=480):(o.ScanCanvas.width=480,o.ScanCanvas.height=640):(o.ScanCanvas.width=640,o.ScanCanvas.height=480),o.DecoderWorker.onmessage=o.BarcodeReaderImageCallback,o.ScanContext.drawImage(e,0,0,o.ScanCanvas.width,o.ScanCanvas.height),o.Orientation=t,o.DecoderWorker.postMessage({scan:o.ScanContext.getImageData(0,0,o.ScanCanvas.width,o.ScanCanvas.height).data,scanWidth:o.ScanCanvas.width,scanHeight:o.ScanCanvas.height,multiple:o.Config.Multiple,decodeFormats:o.Config.DecodeFormats,cmd:"normal",rotation:t,postOrientation:o.PostOrientation})},DetectVerticalSquash:function(e){var t,a=e.naturalHeight,r=o.SquashCanvas;r.width=1,r.height=a;var n=r.getContext("2d");n.drawImage(e,0,0);try{t=n.getImageData(0,0,1,a).data}catch(e){return console.log("Cannot check verticalSquash: CORS?"),1}for(var i=0,c=a,l=a;l>i;)0===t[4*(l-1)+3]?c=l:i=l,l=c+i>>1;var d=l/a;return 0===d?1:d},FixCanvas:function(e){var t=e.getContext("2d"),a=t.drawImage;return t.drawImage=function(e,r,n,i,c,l,d,u,g){var h=1;e&&"IMG"===e.nodeName&&(h=o.DetectVerticalSquash(e)),9===arguments.length?a.call(t,e,r,n,i,c,l,d,u,g/h):void 0!==i?a.call(t,e,r,n,i,c/h):a.call(t,e,r,n)},e}};void 0!==e&&e.exports&&(t=e.exports=o),t.BarcodeReader=o}])});
//# sourceMappingURL=bundle.js.map